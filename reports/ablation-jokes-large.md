# Ablation Study: Token Efficiency vs Explainability

**Date:** 2026-02-13
**HAR file:** `examples/jokes/jokes.large.har` (1727 total entries, 254 after filtering)
**Query:** "Find the API that fetches jokes"

## Results

| Configuration | Entries Sent | Prompt Tokens | Completion Tokens | Total Tokens | Latency | Matched Index |
|---|---|---|---|---|---|---|
| Baseline (no dedup, no reasoning) | 254 | 42,048 | 67 | 42,115 | 12464ms | [253] |
| + Deduplication only | 127 | 6,812 | 52 | 6,864 | 8115ms | [253] |
| + Reasoning only | 254 | 42,175 | 320 | 42,495 | 18101ms | [253] |
| All features (default) | 127 | 6,939 | 334 | 7,273 | 18604ms | [253] |

## Analysis

### Deduplication Impact (prompt tokens)
- Baseline prompt tokens: **42,048**
- With deduplication: **6,939**
- **Savings: 83.5%** of prompt tokens
- Entries sent to LLM: 254 → 127

### Reasoning Impact (completion tokens)
- Without reasoning: **67** completion tokens
- With reasoning: **334** completion tokens
- Additional cost: **+267** completion tokens for reasoning + confidence scores

### Net Effect
- Total token savings (all features vs baseline): **82.7%**
- Latency difference: **+6140ms**
- Correctness: **All configurations returned the same match** ✓

### Trade-off Summary

| Feature | Benefit | Token Cost |
|---|---|---|
| Deduplication | 84% fewer prompt tokens (254 → 127 entries) | -35,236 prompt tokens |
| Reasoning + Confidence | AI transparency, candidate list with confidence scores | +253 completion tokens |

## Matched Entry Details

**Baseline (no dedup, no reasoning):** [253] https://v2.jokeapi.dev/joke/Any?amount=5
> This request to 'https://v2.jokeapi.dev/joke/Any?amount=5' is the best match as it specifically fetches jokes, indicated by the endpoint path and the query parameter 'amount' suggesting the number of jokes to retrieve.

**+ Deduplication only:** [253] https://v2.jokeapi.dev/joke/Any?amount=5
> The endpoint 'GET https://v2.jokeapi.dev/joke/Any?amount=...' is specifically designed to fetch jokes, making it the best match for the user's request.

**+ Reasoning only:** [253] https://v2.jokeapi.dev/joke/Any?amount=5
> The endpoint `https://v2.jokeapi.dev/joke/Any?amount=5` is the best match because it specifically fetches jokes, which directly fulfills the user's request.

**All features (default):** [253] https://v2.jokeapi.dev/joke/Any?amount=5
> The endpoint 'https://v2.jokeapi.dev/joke/Any?amount=...' is the best match as it explicitly indicates that it fetches jokes, aligning perfectly with the user's request.

---
*Generated by ablation.ts*

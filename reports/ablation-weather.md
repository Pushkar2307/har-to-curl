# Ablation Study: Token Efficiency vs Explainability

**Date:** 2026-02-13
**HAR file:** `examples/weather/www.sfgate.com.har` (117 total entries, 12 after filtering)
**Query:** "Return the API that fetches the weather of San Francisco"

## Results

| Configuration | Entries Sent | Prompt Tokens | Completion Tokens | Total Tokens | Latency | Matched Index |
|---|---|---|---|---|---|---|
| Baseline (no dedup, no reasoning) | 12 | 1,421 | 49 | 1,470 | 1443ms | [11] |
| + Deduplication only | 12 | 805 | 46 | 851 | 918ms | [11] |
| + Reasoning only | 12 | 1,548 | 265 | 1,813 | 5133ms | [11] |
| All features (default) | 12 | 932 | 189 | 1,121 | 4135ms | [11] |

## Analysis

### Deduplication Impact (prompt tokens)
- Baseline prompt tokens: **1,421**
- With deduplication: **932**
- **Savings: 34.4%** of prompt tokens
- Entries sent to LLM: 12 → 12

### Reasoning Impact (completion tokens)
- Without reasoning: **49** completion tokens
- With reasoning: **189** completion tokens
- Additional cost: **+140** completion tokens for reasoning + confidence scores

### Net Effect
- Total token savings (all features vs baseline): **23.7%**
- Latency difference: **+2692ms**
- Correctness: **All configurations returned the same match** ✓

### Trade-off Summary

| Feature | Benefit | Token Cost |
|---|---|---|
| Deduplication | 43% fewer prompt tokens (12 → 12 entries) | -616 prompt tokens |
| Reasoning + Confidence | AI transparency, candidate list with confidence scores | +216 completion tokens |

## Matched Entry Details

**Baseline (no dedup, no reasoning):** [11] https://forecast7.com/en/37d77n122d42/san-francisco/?format=json
> This request fetches weather data specifically for San Francisco, as indicated by the URL path and the query parameter 'format=json', which suggests it returns data in JSON format.

**+ Deduplication only:** [11] https://forecast7.com/en/37d77n122d42/san-francisco/?format=json
> This request fetches weather data specifically for San Francisco, as indicated by the URL path containing 'san-francisco' and the response format being JSON.

**+ Reasoning only:** [11] https://forecast7.com/en/37d77n122d42/san-francisco/?format=json
> The request at index [11] is the best match as it directly fetches weather data for San Francisco in JSON format, aligning perfectly with the user's request.

**All features (default):** [11] https://forecast7.com/en/37d77n122d42/san-francisco/?format=json
> This is the best match because it directly references San Francisco in the URL and returns weather-related data in JSON format.

---
*Generated by ablation.ts*

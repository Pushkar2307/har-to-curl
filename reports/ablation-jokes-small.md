# Ablation Study: Token Efficiency vs Explainability

**Date:** 2026-02-13
**HAR file:** `examples/jokes/jokes.har` (34 total entries, 3 after filtering)
**Query:** "Find the API that fetches jokes"

## Results

| Configuration | Entries Sent | Prompt Tokens | Completion Tokens | Total Tokens | Latency | Matched Index |
|---|---|---|---|---|---|---|
| Baseline (no dedup, no reasoning) | 3 | 368 | 53 | 421 | 2079ms | [2] |
| + Deduplication only | 3 | 368 | 54 | 422 | 2240ms | [2] |
| + Reasoning only | 3 | 495 | 253 | 748 | 5774ms | [2] |
| All features (default) | 3 | 495 | 270 | 765 | 5026ms | [2] |

## Analysis

### Deduplication Impact (prompt tokens)
- Baseline prompt tokens: **368**
- With deduplication: **495**
- **Savings: -34.5%** of prompt tokens
- Entries sent to LLM: 3 → 3

### Reasoning Impact (completion tokens)
- Without reasoning: **53** completion tokens
- With reasoning: **270** completion tokens
- Additional cost: **+217** completion tokens for reasoning + confidence scores

### Net Effect
- Total token savings (all features vs baseline): **-81.7%**
- Latency difference: **+2947ms**
- Correctness: **All configurations returned the same match** ✓

### Trade-off Summary

| Feature | Benefit | Token Cost |
|---|---|---|
| Deduplication | 0% fewer prompt tokens (3 → 3 entries) | -0 prompt tokens |
| Reasoning + Confidence | AI transparency, candidate list with confidence scores | +200 completion tokens |

## Matched Entry Details

**Baseline (no dedup, no reasoning):** [2] https://v2.jokeapi.dev/joke/Any?amount=5
> This request to the endpoint '/joke/Any' suggests it fetches jokes, as indicated by the path and the query parameter 'amount' which specifies the number of jokes to retrieve.

**+ Deduplication only:** [2] https://v2.jokeapi.dev/joke/Any?amount=5
> This request to the endpoint '/joke/Any' suggests it fetches jokes, as indicated by the path and the query parameter 'amount', which likely specifies the number of jokes to retrieve.

**+ Reasoning only:** [2] https://v2.jokeapi.dev/joke/Any?amount=5
> The endpoint at index [2] is the best match because it directly fetches jokes, as indicated by its URL and parameters.

**All features (default):** [2] https://v2.jokeapi.dev/joke/Any?amount=5
> The endpoint 'https://v2.jokeapi.dev/joke/Any?amount=...' is the best match as it directly indicates fetching jokes and returns relevant JSON data.

---
*Generated by ablation.ts*

# Ablation Study: Token Efficiency vs Explainability

**Date:** 2026-02-13
**HAR file:** `examples/recipe/recipescal.com.har` (37 total entries, 5 after filtering)
**Query:** "Can you reverse engineer the API that gives me recipes for a given portion and calorie count?"

## Results

*Latency = LLM API call time only (excludes parsing, filtering, dedup)*

| Configuration | Dedup | Candidates | Reasoning | Entries | Prompt Tok | Compl Tok | Total Tok | % vs Baseline | Latency | Match |
|---|---|---|---|---|---|---|---|---|---|---|
| Baseline (minimal) | ✗ | ✗ | ✗ | 5 | 421 | 61 | 482 | — | 3775ms | [0] |
| + Deduplication only | ✓ | ✗ | ✗ | 3 | 378 | 53 | 431 | -10.6% | 2106ms | [0] |
| + Candidates only | ✗ | ✓ | ✗ | 5 | 521 | 172 | 693 | +43.8% | 3618ms | [0] |
| + Reasoning only | ✗ | ✗ | ✓ | 5 | 448 | 114 | 562 | +16.6% | 3216ms | [0] |
| + Candidates + Reasoning | ✗ | ✓ | ✓ | 5 | 548 | 256 | 804 | +66.8% | 5985ms | [0] |
| Dedup + Candidates (default) | ✓ | ✓ | ✗ | 3 | 478 | 168 | 646 | +34.0% | 3327ms | [0] |
| All features (with reasoning) | ✓ | ✓ | ✓ | 3 | 505 | 239 | 744 | +54.4% | 5311ms | [0] |

## Isolated Feature Costs

| Feature | Prompt Δ | Completion Δ | Total Δ | What you get |
|---|---|---|---|---|
| Deduplication | -43 | -8 | -51 | URL compaction, fewer entries sent |
| Candidates + Confidence | +100 | +111 | +211 | Ranked alternatives with confidence bars |
| Reasoning text | +27 | +53 | +80 | Verbose thought process explanation |

## Shipping Default vs All Features

**Dedup + Candidates (shipping default):** 646 tokens (-34.0% vs baseline)
- Confidence bars + candidate list provide the high-value UX
- Reasoning text omitted — adds ~53 completion tokens for limited end-user value

**All features (with reasoning):** 744 tokens
- Full transparency including verbose reasoning text (-54.4% vs baseline)
- Available via `reasoning: true` flag for debugging or detailed analysis

## Correctness

**All configurations returned the same match** ✓ — feature flags do not affect accuracy.

## Matched Entry Details

**Baseline (minimal):** [0] https://recipescal.com/api/bookapi
> The endpoint '/api/bookapi' is likely related to retrieving recipes, as it is the only one that suggests a broader functionality beyond just ingredients or greetings, making it the best match for obtaining recipes based on portion and calorie count.

**+ Deduplication only:** [0] https://recipescal.com/api/bookapi
> The endpoint '/api/bookapi' is likely related to recipes, and since it returns JSON data, it is the best candidate for providing recipes based on specific parameters like portion and calorie count.

**+ Candidates only:** [0] https://recipescal.com/api/bookapi
> The best match is the 'bookapi' endpoint, as it likely returns recipe data, which aligns with the user's request for recipes based on portion and calorie count.

**+ Reasoning only:** [0] https://recipescal.com/api/bookapi
> '/api/bookapi' is the best match as it likely pertains to recipe data, which aligns with the user's interest in obtaining recipes based on specific criteria.

**+ Candidates + Reasoning:** [0] https://recipescal.com/api/bookapi
> The '/api/bookapi' endpoint is the best match as it likely provides access to recipes, which is directly relevant to the user's request for recipes based on specific criteria.

**Dedup + Candidates (default):** [0] https://recipescal.com/api/bookapi
> The 'bookapi' endpoint is the best match as it likely provides recipe data, which aligns with the user's request for recipes based on specific criteria.

**All features (with reasoning):** [0] https://recipescal.com/api/bookapi
> The '/api/bookapi' endpoint is the best match as it likely provides recipe data, which aligns closely with the user's request for recipes based on portion and calorie count.

---
*Generated by ablation.ts*

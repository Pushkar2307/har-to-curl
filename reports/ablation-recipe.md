# Ablation Study: Token Efficiency vs Explainability

**Date:** 2026-02-13
**HAR file:** `examples/recipe/recipescal.com.har` (37 total entries, 5 after filtering)
**Query:** "Can you reverse engineer the API that gives me recipes for a given portion and calorie count?"

## Results

| Configuration | Dedup | Candidates | Reasoning | Entries | Prompt Tok | Compl Tok | Total Tok | Latency | Match |
|---|---|---|---|---|---|---|---|---|---|
| Baseline (minimal) | ✗ | ✗ | ✗ | 5 | 421 | 61 | 482 | 1309ms | [0] |
| + Deduplication only | ✓ | ✗ | ✗ | 3 | 378 | 53 | 431 | 1133ms | [0] |
| + Candidates only | ✗ | ✓ | ✗ | 5 | 521 | 165 | 686 | 4769ms | [0] |
| + Reasoning only | ✗ | ✗ | ✓ | 5 | 448 | 117 | 565 | 2995ms | [0] |
| + Candidates + Reasoning | ✗ | ✓ | ✓ | 5 | 548 | 261 | 809 | 4148ms | [0] |
| Dedup + Candidates (no reasoning) | ✓ | ✓ | ✗ | 3 | 478 | 169 | 647 | 2725ms | [0] |
| All features (default) | ✓ | ✓ | ✓ | 3 | 505 | 234 | 739 | 2907ms | [0] |

## Isolated Feature Costs

| Feature | Prompt Δ | Completion Δ | Total Δ | What you get |
|---|---|---|---|---|
| Deduplication | -43 | -8 | -51 | URL compaction, fewer entries sent |
| Candidates + Confidence | +100 | +104 | +204 | Ranked alternatives with confidence bars |
| Reasoning text | +27 | +56 | +83 | Verbose thought process explanation |

## Recommended Configuration

**Dedup + Candidates (no reasoning):** 647 tokens (-34.2% vs baseline)
- Gets you the high-value UX (confidence bars, candidate list) without the verbose reasoning text
- Reasoning text adds ~56 completion tokens for limited end-user value

**All features:** 739 tokens
- Full transparency including reasoning (-53.3% vs baseline)

## Correctness

**All configurations returned the same match** ✓ — feature flags do not affect accuracy.

## Matched Entry Details

**Baseline (minimal):** [0] https://recipescal.com/api/bookapi
> The endpoint '/api/bookapi' is likely related to retrieving recipes, as it is the only one that suggests a broader functionality beyond just ingredients or greetings, making it the best match for obtaining recipes based on portion and calorie count.

**+ Deduplication only:** [0] https://recipescal.com/api/bookapi
> The endpoint '/api/bookapi' is likely related to recipes, and since it returns JSON data, it is the best candidate for providing recipes based on specific parameters like portion and calorie count.

**+ Candidates only:** [0] https://recipescal.com/api/bookapi
> The 'bookapi' endpoint is the best match as it likely returns recipe data, which aligns with the user's request for recipes based on portion and calorie count.

**+ Reasoning only:** [0] https://recipescal.com/api/bookapi
> '/api/bookapi' is the best match as it is the only endpoint that suggests it may provide recipe-related data, aligning with the user's need for recipes based on specific criteria.

**+ Candidates + Reasoning:** [0] https://recipescal.com/api/bookapi
> '/api/bookapi' is the best match as it is the only endpoint that suggests it could provide recipes, which is what the user is looking for.

**Dedup + Candidates (no reasoning):** [0] https://recipescal.com/api/bookapi
> The 'bookapi' endpoint is the best match as it likely provides recipe data, which aligns with the user's request for recipes based on portion and calorie count.

**All features (default):** [0] https://recipescal.com/api/bookapi
> The '/api/bookapi' endpoint is the best match as it likely provides recipe data, which aligns closely with the user's request for recipes based on portion and calorie count.

---
*Generated by ablation.ts*
